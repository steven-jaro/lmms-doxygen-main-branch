<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LMMS: Managing and determining latency</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LMMS
   </div>
   <div id="projectbrief">Linux MultiMedia Studio</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('d7/dc4/group__LatencyFunctions.html','../../',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Managing and determining latency </div></div>
</div><!--header-->
<div class="contents">

<p>The purpose of JACK's latency API is to allow clients to easily answer two questions:  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab662aee3835495b635a5f5d0b074e998" id="r_gab662aee3835495b635a5f5d0b074e998"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d49/types_8h.html#aa954df532e901ae5172e68a23f3da9b6">jack_nframes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab662aee3835495b635a5f5d0b074e998">jack_port_get_latency</a> (<a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *port) <a class="el" href="../../dc/db4/weakmacros_8h.html#a1e210baf579efdd33593675e8d19afe5">JACK_OPTIONAL_WEAK_DEPRECATED_EXPORT</a></td></tr>
<tr class="memitem:ga56987aa7fa1e2b3d1dd61446ec6aa304" id="r_ga56987aa7fa1e2b3d1dd61446ec6aa304"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga56987aa7fa1e2b3d1dd61446ec6aa304">jack_port_get_latency_range</a> (<a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *port, <a class="el" href="../../d9/d49/types_8h.html#ae415c828fc3da3e5d7a10ed2dbffffce">jack_latency_callback_mode_t</a> mode, <a class="el" href="../../d9/d49/types_8h.html#a8177c6512bf4aa5842849afd219ecf50">jack_latency_range_t</a> *range) <a class="el" href="../../dc/db4/weakmacros_8h.html#a0d5e945c8b6a894b29ddb6f14052b147">JACK_WEAK_EXPORT</a></td></tr>
<tr class="memdesc:ga56987aa7fa1e2b3d1dd61446ec6aa304"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the latency range defined by <em class="arg">mode</em> for <em class="arg">port</em>, in frames.  <br /></td></tr>
<tr class="memitem:gaac6e092377f370515962e995850f3857" id="r_gaac6e092377f370515962e995850f3857"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d49/types_8h.html#aa954df532e901ae5172e68a23f3da9b6">jack_nframes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaac6e092377f370515962e995850f3857">jack_port_get_total_latency</a> (<a class="el" href="../../d9/d49/types_8h.html#a96cf103940d2ee71b141d4b9d0c116bf">jack_client_t</a> *<a class="el" href="../../d6/d8e/testSem_8cpp.html#a5cbf99e8849f2e3ea613ea0a2df2f272">client</a>, <a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *port) <a class="el" href="../../dc/db4/weakmacros_8h.html#a1e210baf579efdd33593675e8d19afe5">JACK_OPTIONAL_WEAK_DEPRECATED_EXPORT</a></td></tr>
<tr class="memdesc:gaac6e092377f370515962e995850f3857"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum of the sum of the latencies in every connection path that can be drawn between the port and other ports with the <a class="el" href="../../d9/d49/types_8h.html#acbcada380e9dfdd5bff1296e7156f478ae902a1c91f82b33cb956e1ac310592b3">JackPortIsTerminal</a> flag set.  <br /></td></tr>
<tr class="memitem:ga00fd0e5b971cbeaa1b9d9fecbed4218b" id="r_ga00fd0e5b971cbeaa1b9d9fecbed4218b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga00fd0e5b971cbeaa1b9d9fecbed4218b">jack_port_set_latency</a> (<a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *port, <a class="el" href="../../d9/d49/types_8h.html#aa954df532e901ae5172e68a23f3da9b6">jack_nframes_t</a>) <a class="el" href="../../dc/db4/weakmacros_8h.html#a1e210baf579efdd33593675e8d19afe5">JACK_OPTIONAL_WEAK_DEPRECATED_EXPORT</a></td></tr>
<tr class="memdesc:ga00fd0e5b971cbeaa1b9d9fecbed4218b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The port latency is zero by default.  <br /></td></tr>
<tr class="memitem:gae00146368eb4aabc3bbe642d5e6803f7" id="r_gae00146368eb4aabc3bbe642d5e6803f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae00146368eb4aabc3bbe642d5e6803f7">jack_port_set_latency_range</a> (<a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *port, <a class="el" href="../../d9/d49/types_8h.html#ae415c828fc3da3e5d7a10ed2dbffffce">jack_latency_callback_mode_t</a> mode, <a class="el" href="../../d9/d49/types_8h.html#a8177c6512bf4aa5842849afd219ecf50">jack_latency_range_t</a> *range) <a class="el" href="../../dc/db4/weakmacros_8h.html#a0d5e945c8b6a894b29ddb6f14052b147">JACK_WEAK_EXPORT</a></td></tr>
<tr class="memdesc:gae00146368eb4aabc3bbe642d5e6803f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the minimum and maximum latencies defined by <em class="arg">mode</em> for <em class="arg">port</em>, in frames.  <br /></td></tr>
<tr class="memitem:gaf86ed8ccc2779f317bf2a6ec5646d748" id="r_gaf86ed8ccc2779f317bf2a6ec5646d748"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf86ed8ccc2779f317bf2a6ec5646d748">jack_recompute_total_latencies</a> (<a class="el" href="../../d9/d49/types_8h.html#a96cf103940d2ee71b141d4b9d0c116bf">jack_client_t</a> *<a class="el" href="../../d6/d8e/testSem_8cpp.html#a5cbf99e8849f2e3ea613ea0a2df2f272">client</a>) <a class="el" href="../../dc/db4/weakmacros_8h.html#adf1bde0dd996bbf61a44311165014dd1">JACK_OPTIONAL_WEAK_EXPORT</a></td></tr>
<tr class="memdesc:gaf86ed8ccc2779f317bf2a6ec5646d748"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request a complete recomputation of all port latencies.  <br /></td></tr>
<tr class="memitem:ga30917f7fee45e1274ee27aecc046d0bb" id="r_ga30917f7fee45e1274ee27aecc046d0bb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga30917f7fee45e1274ee27aecc046d0bb">jack_recompute_total_latency</a> (<a class="el" href="../../d9/d49/types_8h.html#a96cf103940d2ee71b141d4b9d0c116bf">jack_client_t</a> *, <a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *port) <a class="el" href="../../dc/db4/weakmacros_8h.html#a1e210baf579efdd33593675e8d19afe5">JACK_OPTIONAL_WEAK_DEPRECATED_EXPORT</a></td></tr>
<tr class="memdesc:ga30917f7fee45e1274ee27aecc046d0bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request a complete recomputation of a port's total latency.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>The purpose of JACK's latency API is to allow clients to easily answer two questions: </p>
<ul>
<li>How long has it been since the data read from a port arrived at the edge of the JACK graph (either via a physical port or being synthesized from scratch)?</li>
<li>How long will it be before the data written to a port arrives at the edge of a JACK graph?</li>
</ul>
<p>To help answering these two questions, all JACK ports have two latency values associated with them, both measured in frames:</p>
<p><b>capture latency</b>: how long since the data read from the buffer of a port arrived at a port marked with JackPortIsTerminal. The data will have come from the "outside
                 world" if the terminal port is also marked with JackPortIsPhysical, or will have been synthesized by the client that owns the terminal port.</p>
<p><b>playback latency</b>: how long until the data written to the buffer of port will reach a port marked with JackPortIsTerminal.</p>
<p>Both latencies might potentially have more than one value because there may be multiple pathways to/from a given port and a terminal port. Latency is therefore generally expressed a min/max pair.</p>
<p>In most common setups, the minimum and maximum latency are the same, but this design accommodates more complex routing, and allows applications (and thus users) to detect cases where routing is creating an anomalous situation that may either need fixing or more sophisticated handling by clients that care about latency.</p>
<p>See also <a class="el" href="../../d7/d4f/group__ClientCallbacks.html#ga180715272c360546b0d55c46d2b41627">jack_set_latency_callback</a> for details on how clients that add latency to the signal path should interact with JACK to ensure that the correct latency figures are used. </p>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="gab662aee3835495b635a5f5d0b074e998" name="gab662aee3835495b635a5f5d0b074e998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab662aee3835495b635a5f5d0b074e998">&#9670;&#160;</a></span>jack_port_get_latency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h.html#ab628e42bb29ed7b1ca25e8c54aeb77d3">LIB_EXPORT</a> <a class="el" href="../../d9/d49/types_8h.html#aa954df532e901ae5172e68a23f3da9b6">jack_nframes_t</a> jack_port_get_latency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *</td>          <td class="paramname"><span class="paramname"><em>port</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../df/d89/jack_8h.html">jack.h</a>&gt;</code></p>
<dl class="section return"><dt>Returns</dt><dd>the time (in frames) between data being available or delivered at/to a port, and the time at which it arrived at or is delivered to the "other side" of the port. E.g. for a physical audio output port, this is the time between writing to the port and when the signal will leave the connector. For a physical audio input port, this is the time between the sound arriving at the connector and the corresponding frames being readable from the port.</dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000019">Deprecated</a></b></dt><dd>This method will be removed in the next major release of JACK. It should not be used in new code, and should be replaced by <a class="el" href="#ga56987aa7fa1e2b3d1dd61446ec6aa304" title="return the latency range defined by mode for port, in frames.">jack_port_get_latency_range()</a> in any existing use cases. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00543">543</a> of file <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html">JackAPI.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d7e/JackGlobals_8cpp_source.html#l00076">Jack::JackGlobals::CheckContext()</a>, <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00295">CheckPort()</a>, <a class="el" href="../../d6/d1e/JackInternalClient_8cpp_source.html#l00041">Jack::GetGraphManager()</a>, <a class="el" href="../../d1/dc4/JackPort_8cpp_source.html#l00085">Jack::JackPort::GetLatency()</a>, <a class="el" href="../../d4/d13/JackGraphManager_8cpp_source.html#l00077">Jack::JackGraphManager::GetPort()</a>, <a class="el" href="../../d5/de8/Shm_8cpp_source.html#l00058">jack_error</a>, <a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h_source.html#l00042">LIB_EXPORT</a>, and <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00305">WaitGraphChange()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dac/test_8cpp_source.html#l00558">main()</a>.</p>

</div>
</div>
<a id="ga56987aa7fa1e2b3d1dd61446ec6aa304" name="ga56987aa7fa1e2b3d1dd61446ec6aa304"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga56987aa7fa1e2b3d1dd61446ec6aa304">&#9670;&#160;</a></span>jack_port_get_latency_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h.html#ab628e42bb29ed7b1ca25e8c54aeb77d3">LIB_EXPORT</a> void jack_port_get_latency_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ae415c828fc3da3e5d7a10ed2dbffffce">jack_latency_callback_mode_t</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a8177c6512bf4aa5842849afd219ecf50">jack_latency_range_t</a> *</td>          <td class="paramname"><span class="paramname"><em>range</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../df/d89/jack_8h.html">jack.h</a>&gt;</code></p>

<p>return the latency range defined by <em class="arg">mode</em> for <em class="arg">port</em>, in frames. </p>
<p>See <a class="el" href="../../d7/dc4/group__LatencyFunctions.html">Managing and determining latency</a> for the definition of each latency value.</p>
<p>This function is best used from callbacks, specifically the latency callback. Before a port is connected, this returns the default latency: zero. Therefore it only makes sense to call <a class="el" href="#ga56987aa7fa1e2b3d1dd61446ec6aa304" title="return the latency range defined by mode for port, in frames.">jack_port_get_latency_range()</a> when the port is connected, and that gets signalled by the latency callback. See <a class="el" href="../../d7/d4f/group__ClientCallbacks.html#ga180715272c360546b0d55c46d2b41627">jack_set_latency_callback()</a> for details. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00574">574</a> of file <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html">JackAPI.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d7e/JackGlobals_8cpp_source.html#l00076">Jack::JackGlobals::CheckContext()</a>, <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00295">CheckPort()</a>, <a class="el" href="../../d6/d1e/JackInternalClient_8cpp_source.html#l00041">Jack::GetGraphManager()</a>, <a class="el" href="../../d1/dc4/JackPort_8cpp_source.html#l00135">Jack::JackPort::GetLatencyRange()</a>, <a class="el" href="../../d4/d13/JackGraphManager_8cpp_source.html#l00077">Jack::JackGraphManager::GetPort()</a>, <a class="el" href="../../d5/de8/Shm_8cpp_source.html#l00058">jack_error</a>, <a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h_source.html#l00042">LIB_EXPORT</a>, and <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00305">WaitGraphChange()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d66/iodelay_8cpp_source.html#l00176">latency_cb()</a>.</p>

</div>
</div>
<a id="gaac6e092377f370515962e995850f3857" name="gaac6e092377f370515962e995850f3857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac6e092377f370515962e995850f3857">&#9670;&#160;</a></span>jack_port_get_total_latency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h.html#ab628e42bb29ed7b1ca25e8c54aeb77d3">LIB_EXPORT</a> <a class="el" href="../../d9/d49/types_8h.html#aa954df532e901ae5172e68a23f3da9b6">jack_nframes_t</a> jack_port_get_total_latency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a96cf103940d2ee71b141d4b9d0c116bf">jack_client_t</a> *</td>          <td class="paramname"><span class="paramname"><em>client</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *</td>          <td class="paramname"><span class="paramname"><em>port</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../df/d89/jack_8h.html">jack.h</a>&gt;</code></p>

<p>The maximum of the sum of the latencies in every connection path that can be drawn between the port and other ports with the <a class="el" href="../../d9/d49/types_8h.html#acbcada380e9dfdd5bff1296e7156f478ae902a1c91f82b33cb956e1ac310592b3">JackPortIsTerminal</a> flag set. </p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000021">Deprecated</a></b></dt><dd>This method will be removed in the next major release of JACK. It should not be used in new code, and should be replaced by <a class="el" href="#ga56987aa7fa1e2b3d1dd61446ec6aa304" title="return the latency range defined by mode for port, in frames.">jack_port_get_latency_range()</a> in any existing use cases. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l01188">1188</a> of file <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html">JackAPI.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d7e/JackGlobals_8cpp_source.html#l00076">Jack::JackGlobals::CheckContext()</a>, <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00295">CheckPort()</a>, <a class="el" href="../../d6/d8e/testSem_8cpp_source.html#l00140">client()</a>, <a class="el" href="../../d4/d13/JackGraphManager_8cpp_source.html#l00285">Jack::JackGraphManager::ComputeTotalLatency()</a>, <a class="el" href="../../d6/d1e/JackInternalClient_8cpp_source.html#l00041">Jack::GetGraphManager()</a>, <a class="el" href="../../d4/d13/JackGraphManager_8cpp_source.html#l00077">Jack::JackGraphManager::GetPort()</a>, <a class="el" href="../../d1/dc4/JackPort_8cpp_source.html#l00090">Jack::JackPort::GetTotalLatency()</a>, <a class="el" href="../../d5/de8/Shm_8cpp_source.html#l00058">jack_error</a>, <a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h_source.html#l00042">LIB_EXPORT</a>, and <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00305">WaitGraphChange()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dac/test_8cpp_source.html#l00558">main()</a>.</p>

</div>
</div>
<a id="ga00fd0e5b971cbeaa1b9d9fecbed4218b" name="ga00fd0e5b971cbeaa1b9d9fecbed4218b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga00fd0e5b971cbeaa1b9d9fecbed4218b">&#9670;&#160;</a></span>jack_port_set_latency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h.html#ab628e42bb29ed7b1ca25e8c54aeb77d3">LIB_EXPORT</a> void jack_port_set_latency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#aa954df532e901ae5172e68a23f3da9b6">jack_nframes_t</a></td>          <td class="paramname"><span class="paramname"><em>frames</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../df/d89/jack_8h.html">jack.h</a>&gt;</code></p>

<p>The port latency is zero by default. </p>
<p>Clients that control physical hardware with non-zero latency should call this to set the latency to its correct value. Note that the value should include any systemic latency present "outside" the physical hardware controlled by the client. For example, for a client controlling a digital audio interface connected to an external digital converter, the latency setting should include both buffering by the audio interface <em>and</em> the converter.</p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000015">Deprecated</a></b></dt><dd>This method will be removed in the next major release of JACK. It should not be used in new code, and should be replaced by a latency callback that calls <a class="el" href="#gae00146368eb4aabc3bbe642d5e6803f7">jack_port_set_latency_range()</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00559">559</a> of file <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html">JackAPI.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d7e/JackGlobals_8cpp_source.html#l00076">Jack::JackGlobals::CheckContext()</a>, <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00295">CheckPort()</a>, <a class="el" href="../../d6/d1e/JackInternalClient_8cpp_source.html#l00041">Jack::GetGraphManager()</a>, <a class="el" href="../../d4/d13/JackGraphManager_8cpp_source.html#l00077">Jack::JackGraphManager::GetPort()</a>, <a class="el" href="../../d5/de8/Shm_8cpp_source.html#l00058">jack_error</a>, <a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h_source.html#l00042">LIB_EXPORT</a>, and <a class="el" href="../../d1/dc4/JackPort_8cpp_source.html#l00095">Jack::JackPort::SetLatency()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dac/test_8cpp_source.html#l00558">main()</a>.</p>

</div>
</div>
<a id="gae00146368eb4aabc3bbe642d5e6803f7" name="gae00146368eb4aabc3bbe642d5e6803f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae00146368eb4aabc3bbe642d5e6803f7">&#9670;&#160;</a></span>jack_port_set_latency_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h.html#ab628e42bb29ed7b1ca25e8c54aeb77d3">LIB_EXPORT</a> void jack_port_set_latency_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ae415c828fc3da3e5d7a10ed2dbffffce">jack_latency_callback_mode_t</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a8177c6512bf4aa5842849afd219ecf50">jack_latency_range_t</a> *</td>          <td class="paramname"><span class="paramname"><em>range</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../df/d89/jack_8h.html">jack.h</a>&gt;</code></p>

<p>set the minimum and maximum latencies defined by <em class="arg">mode</em> for <em class="arg">port</em>, in frames. </p>
<p>See <a class="el" href="../../d7/dc4/group__LatencyFunctions.html">Managing and determining latency</a> for the definition of each latency value.</p>
<p>This function should ONLY be used inside a latency callback. The client should determine the current value of the latency using <a class="el" href="#ga56987aa7fa1e2b3d1dd61446ec6aa304">jack_port_get_latency_range()</a> (called using the same mode as <em class="arg">mode</em>) and then add some number of frames to that reflects latency added by the client.</p>
<p>How much latency a client adds will vary dramatically. For most clients, the answer is zero and there is no reason for them to register a latency callback and thus they should never call this function.</p>
<p>More complex clients that take an input signal, transform it in some way and output the result but not during the same process() callback will generally know a single constant value to add to the value returned by <a class="el" href="#ga56987aa7fa1e2b3d1dd61446ec6aa304">jack_port_get_latency_range()</a>.</p>
<p>Such clients would register a latency callback (see <a class="el" href="../../d7/d4f/group__ClientCallbacks.html#ga180715272c360546b0d55c46d2b41627">jack_set_latency_callback</a>) and must know what input ports feed which output ports as part of their internal state. Their latency callback will update the ports' latency values appropriately.</p>
<p>A pseudo-code example will help. The <em class="arg">mode</em> argument to the latency callback will determine whether playback or capture latency is being set. The callback will use <a class="el" href="#gae00146368eb4aabc3bbe642d5e6803f7">jack_port_set_latency_range()</a> as follows:</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="../../d9/d49/types_8h.html#a8177c6512bf4aa5842849afd219ecf50">jack_latency_range_t</a> range;</div>
<div class="line"><span class="keywordflow">if</span> (mode == <a class="code hl_enumvalue" href="../../d9/d49/types_8h.html#a6e99aa9141e9ee146a56cf53b96964d8a437ff958982a3cbc72a3c2ffba6a1145">JackPlaybackLatency</a>) {</div>
<div class="line"> <span class="keywordflow">foreach</span> input_port in (all self-registered port) {</div>
<div class="line">  <a class="code hl_function" href="#ga56987aa7fa1e2b3d1dd61446ec6aa304">jack_port_get_latency_range</a> (port_feeding_input_port, <a class="code hl_enumvalue" href="../../d9/d49/types_8h.html#a6e99aa9141e9ee146a56cf53b96964d8a437ff958982a3cbc72a3c2ffba6a1145">JackPlaybackLatency</a>, &amp;range);</div>
<div class="line">  range.<a class="code hl_variable" href="../../d0/df4/struct__jack__latency__range.html#ab357b9064e2793e29755f5a6b550c3f2">min</a> += min_delay_added_as_signal_flows_from port_feeding to input_port;</div>
<div class="line">  range.<a class="code hl_variable" href="../../d0/df4/struct__jack__latency__range.html#a27a00059e59b8f7790d0479f8748a68f">max</a> += max_delay_added_as_signal_flows_from port_feeding to input_port;</div>
<div class="line">  <a class="code hl_function" href="#gae00146368eb4aabc3bbe642d5e6803f7">jack_port_set_latency_range</a> (input_port, <a class="code hl_enumvalue" href="../../d9/d49/types_8h.html#a6e99aa9141e9ee146a56cf53b96964d8a437ff958982a3cbc72a3c2ffba6a1145">JackPlaybackLatency</a>, &amp;range);</div>
<div class="line"> }</div>
<div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode == <a class="code hl_enumvalue" href="../../d9/d49/types_8h.html#a6e99aa9141e9ee146a56cf53b96964d8ae56d658f457dbff2f043e89bc6dc105d">JackCaptureLatency</a>) {</div>
<div class="line"> <span class="keywordflow">foreach</span> output_port in (all self-registered port) {</div>
<div class="line">  <a class="code hl_function" href="#ga56987aa7fa1e2b3d1dd61446ec6aa304">jack_port_get_latency_range</a> (port_fed_by_output_port, <a class="code hl_enumvalue" href="../../d9/d49/types_8h.html#a6e99aa9141e9ee146a56cf53b96964d8ae56d658f457dbff2f043e89bc6dc105d">JackCaptureLatency</a>, &amp;range);</div>
<div class="line">  range.<a class="code hl_variable" href="../../d0/df4/struct__jack__latency__range.html#ab357b9064e2793e29755f5a6b550c3f2">min</a> += min_delay_added_as_signal_flows_from_output_port_to_fed_by_port;</div>
<div class="line">  range.<a class="code hl_variable" href="../../d0/df4/struct__jack__latency__range.html#a27a00059e59b8f7790d0479f8748a68f">max</a> += max_delay_added_as_signal_flows_from_output_port_to_fed_by_port;</div>
<div class="line">  <a class="code hl_function" href="#gae00146368eb4aabc3bbe642d5e6803f7">jack_port_set_latency_range</a> (output_port, <a class="code hl_enumvalue" href="../../d9/d49/types_8h.html#a6e99aa9141e9ee146a56cf53b96964d8ae56d658f457dbff2f043e89bc6dc105d">JackCaptureLatency</a>, &amp;range);</div>
<div class="line"> }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__LatencyFunctions_html_ga56987aa7fa1e2b3d1dd61446ec6aa304"><div class="ttname"><a href="#ga56987aa7fa1e2b3d1dd61446ec6aa304">jack_port_get_latency_range</a></div><div class="ttdeci">void jack_port_get_latency_range(jack_port_t *port, jack_latency_callback_mode_t mode, jack_latency_range_t *range) JACK_WEAK_EXPORT</div><div class="ttdoc">return the latency range defined by mode for port, in frames.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d8c/JackAPI_8cpp_source.html#l00574">JackAPI.cpp:574</a></div></div>
<div class="ttc" id="agroup__LatencyFunctions_html_gae00146368eb4aabc3bbe642d5e6803f7"><div class="ttname"><a href="#gae00146368eb4aabc3bbe642d5e6803f7">jack_port_set_latency_range</a></div><div class="ttdeci">void jack_port_set_latency_range(jack_port_t *port, jack_latency_callback_mode_t mode, jack_latency_range_t *range) JACK_WEAK_EXPORT</div><div class="ttdoc">set the minimum and maximum latencies defined by mode for port, in frames.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d8c/JackAPI_8cpp_source.html#l00590">JackAPI.cpp:590</a></div></div>
<div class="ttc" id="astruct__jack__latency__range_html_a27a00059e59b8f7790d0479f8748a68f"><div class="ttname"><a href="../../d0/df4/struct__jack__latency__range.html#a27a00059e59b8f7790d0479f8748a68f">_jack_latency_range::max</a></div><div class="ttdeci">jack_nframes_t max</div><div class="ttdoc">maximum latency</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d49/types_8h_source.html#l00274">types.h:274</a></div></div>
<div class="ttc" id="astruct__jack__latency__range_html_ab357b9064e2793e29755f5a6b550c3f2"><div class="ttname"><a href="../../d0/df4/struct__jack__latency__range.html#ab357b9064e2793e29755f5a6b550c3f2">_jack_latency_range::min</a></div><div class="ttdeci">jack_nframes_t min</div><div class="ttdoc">minimum latency</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d49/types_8h_source.html#l00270">types.h:270</a></div></div>
<div class="ttc" id="atypes_8h_html_a6e99aa9141e9ee146a56cf53b96964d8a437ff958982a3cbc72a3c2ffba6a1145"><div class="ttname"><a href="../../d9/d49/types_8h.html#a6e99aa9141e9ee146a56cf53b96964d8a437ff958982a3cbc72a3c2ffba6a1145">JackPlaybackLatency</a></div><div class="ttdeci">@ JackPlaybackLatency</div><div class="ttdoc">Latency Callback for Playback Latency.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d49/types_8h_source.html#l00241">types.h:241</a></div></div>
<div class="ttc" id="atypes_8h_html_a6e99aa9141e9ee146a56cf53b96964d8ae56d658f457dbff2f043e89bc6dc105d"><div class="ttname"><a href="../../d9/d49/types_8h.html#a6e99aa9141e9ee146a56cf53b96964d8ae56d658f457dbff2f043e89bc6dc105d">JackCaptureLatency</a></div><div class="ttdeci">@ JackCaptureLatency</div><div class="ttdoc">Latency Callback for Capture Latency.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d49/types_8h_source.html#l00234">types.h:234</a></div></div>
<div class="ttc" id="atypes_8h_html_a8177c6512bf4aa5842849afd219ecf50"><div class="ttname"><a href="../../d9/d49/types_8h.html#a8177c6512bf4aa5842849afd219ecf50">jack_latency_range_t</a></div><div class="ttdeci">struct _jack_latency_range jack_latency_range_t</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d49/types_8h_source.html#l00277">types.h:277</a></div></div>
</div><!-- fragment --><p>In this relatively simple pseudo-code example, it is assumed that each input port or output is connected to only 1 output or input port respectively.</p>
<p>If a port is connected to more than 1 other port, then the range.min and range.max values passed to <a class="el" href="#gae00146368eb4aabc3bbe642d5e6803f7">jack_port_set_latency_range()</a> should reflect the minimum and maximum values across all connected ports.</p>
<p>See the description of <a class="el" href="../../d7/d4f/group__ClientCallbacks.html#ga180715272c360546b0d55c46d2b41627">jack_set_latency_callback</a> for more information. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00590">590</a> of file <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html">JackAPI.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d7e/JackGlobals_8cpp_source.html#l00076">Jack::JackGlobals::CheckContext()</a>, <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00295">CheckPort()</a>, <a class="el" href="../../d6/d1e/JackInternalClient_8cpp_source.html#l00041">Jack::GetGraphManager()</a>, <a class="el" href="../../d4/d13/JackGraphManager_8cpp_source.html#l00077">Jack::JackGraphManager::GetPort()</a>, <a class="el" href="../../d5/de8/Shm_8cpp_source.html#l00058">jack_error</a>, <a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h_source.html#l00042">LIB_EXPORT</a>, <a class="el" href="../../d1/dc4/JackPort_8cpp_source.html#l00112">Jack::JackPort::SetLatencyRange()</a>, and <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00305">WaitGraphChange()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d33/JackAudioAdapter_8cpp_source.html#l00073">Jack::JackAudioAdapter::Latency()</a>, <a class="el" href="../../db/d66/iodelay_8cpp_source.html#l00176">latency_cb()</a>, and <a class="el" href="../../d1/d46/JackNetManager_8cpp_source.html#l00393">Jack::JackNetMaster::LatencyCallback()</a>.</p>

</div>
</div>
<a id="gaf86ed8ccc2779f317bf2a6ec5646d748" name="gaf86ed8ccc2779f317bf2a6ec5646d748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf86ed8ccc2779f317bf2a6ec5646d748">&#9670;&#160;</a></span>jack_recompute_total_latencies()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h.html#ab628e42bb29ed7b1ca25e8c54aeb77d3">LIB_EXPORT</a> int jack_recompute_total_latencies </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a96cf103940d2ee71b141d4b9d0c116bf">jack_client_t</a> *</td>          <td class="paramname"><span class="paramname"><em>client</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../df/d89/jack_8h.html">jack.h</a>&gt;</code></p>

<p>Request a complete recomputation of all port latencies. </p>
<p>This can be called by a client that has just changed the internal latency of its port using jack_port_set_latency and wants to ensure that all signal pathways in the graph are updated with respect to the values that will be returned by jack_port_get_total_latency. It allows a client to change multiple port latencies without triggering a recompute for each change.</p>
<dl class="section return"><dt>Returns</dt><dd>zero for successful execution of the request. non-zero otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00627">627</a> of file <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html">JackAPI.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d7e/JackGlobals_8cpp_source.html#l00076">Jack::JackGlobals::CheckContext()</a>, <a class="el" href="../../d6/d8e/testSem_8cpp_source.html#l00140">client()</a>, <a class="el" href="../../d5/de8/Shm_8cpp_source.html#l00058">jack_error</a>, and <a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h_source.html#l00042">LIB_EXPORT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dac/test_8cpp_source.html#l00558">main()</a>.</p>

</div>
</div>
<a id="ga30917f7fee45e1274ee27aecc046d0bb" name="ga30917f7fee45e1274ee27aecc046d0bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga30917f7fee45e1274ee27aecc046d0bb">&#9670;&#160;</a></span>jack_recompute_total_latency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h.html#ab628e42bb29ed7b1ca25e8c54aeb77d3">LIB_EXPORT</a> int jack_recompute_total_latency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a96cf103940d2ee71b141d4b9d0c116bf">jack_client_t</a> *</td>          <td class="paramname"><span class="paramname"><em>ext_client</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91bf0f8fb0619705676136a7f5e3a931">jack_port_t</a> *</td>          <td class="paramname"><span class="paramname"><em>port</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../df/d89/jack_8h.html">jack.h</a>&gt;</code></p>

<p>Request a complete recomputation of a port's total latency. </p>
<p>This can be called by a client that has just changed the internal latency of its port using jack_port_set_latency and wants to ensure that all signal pathways in the graph are updated with respect to the values that will be returned by jack_port_get_total_latency.</p>
<dl class="section return"><dt>Returns</dt><dd>zero for successful execution of the request. non-zero otherwise.</dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000022">Deprecated</a></b></dt><dd>This method will be removed in the next major release of JACK. It should not be used in new code, and should be replaced by <a class="el" href="#gaf86ed8ccc2779f317bf2a6ec5646d748" title="Request a complete recomputation of all port latencies.">jack_recompute_total_latencies()</a> in any existing use cases. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00606">606</a> of file <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html">JackAPI.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d7e/JackGlobals_8cpp_source.html#l00076">Jack::JackGlobals::CheckContext()</a>, <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00295">CheckPort()</a>, <a class="el" href="../../d6/d8e/testSem_8cpp_source.html#l00140">client()</a>, <a class="el" href="../../d4/d13/JackGraphManager_8cpp_source.html#l00285">Jack::JackGraphManager::ComputeTotalLatency()</a>, <a class="el" href="../../d6/d1e/JackInternalClient_8cpp_source.html#l00041">Jack::GetGraphManager()</a>, <a class="el" href="../../d5/de8/Shm_8cpp_source.html#l00058">jack_error</a>, <a class="el" href="../../df/dc7/android_2JackCompilerDeps__os_8h_source.html#l00042">LIB_EXPORT</a>, and <a class="el" href="../../d8/d8c/JackAPI_8cpp_source.html#l00305">WaitGraphChange()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for LMMS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
